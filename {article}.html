<!--TEMPLATE mustache-->

{{% partial /_layout }}
{{% partial /_nav }}
{{% import {article} from 'ðŸ”—' }}

{{< layout}}

{{$title}}{{article.title}}{{/title}}

{{$content}}

<div class="columns">
    <div class="column is-one-fifth is-hidden-mobile">
        {{>nav}}
    </div>
    <div class="column">
        <article>
            <header>
                <h1>{{article.title}}</h1>

                {{#article.summary}}<p>{{article.summary}}</p>{{/article.summary}}
            </header>

            {{{article.get.content}}}

            <footer>
                <div class="suggestion"><span>Any suggestion or typo? </span>
                    <a class="suggestion-edit-link"
                       href="https://github.com/stacklane/docs/edit/master/ðŸ—„/Article/{{article.uid}}.md"
                       target="_blank" rel="noreferrer noopener nofollow">Edit on GitHub</a></div>
            </footer>
        </article>
    </div>
    <div class="column is-narrow is-hidden-tablet-only is-hidden-mobile">
        <div id="toc"></div>
    </div>
</div>

<!--
  TOC
  -->
<script>
    var html = '';

    document.querySelectorAll('article > h1').forEach(function (e) {
        if (e.id){
            var title = e.innerText;
            html += '<li><a href="#' + e.id + '" data-scroll>' + title + '</a></li>';
        }
    });

    if (html.length > 0) $get('toc').innerHTML = '<ul>' + html + '</ul>';

    /* does not span sections..
    $ready(function() {
        if (typeof Gumshoe !== 'undefined') {
            var height = $get('nav').getBoundingClientRect().height;
            new Gumshoe('#toc a', {
                navClass: 'is-active', // applied to the nav list item
                //contentClass: 'is-active', // applied to the content
                offset: function () {
                    return height;
                },
                reflow: true
            });
        }
    });*/
</script>

{{/content}}
{{/layout}}