{{% svg /icons/ as icon }}

<div id="all-nav" class="invisible">
<h1 class="nav-category">{{>icon-compass-sm}} Overview</h1>
<ul class="d-none">
    <li><a class="nav-link" href="/">Introduction</a></li>
    <li><a class="nav-link" href="/infrastructure">Infrastructure</a></li>
    <li><a class="nav-link" href="/limits">Limits</a></li>
    <li><a class="nav-link" href="/roadmap">Roadmap</a></li>

    <!--
    <li><a class="nav-link" href="/quickstart">Quickstart</a></li>
    -->
</ul>
<h1 class="nav-category">{{>icon-database-sm}} Models</h1>
<ul class="d-none">
    <li><a class="nav-link" href="/models/">Overview</a></li>
    <li><a class="nav-link" href="/models/types">Types</a></li>
    <li><a class="nav-link" href="/models/fields">Fields</a></li>
    <li><a class="nav-link" href="/models/definition">Definition</a></li>
</ul>
<h1 class="nav-category">{{>icon-target-sm}} Endpoints</h1>
<ul class="d-none">
    <li><a class="nav-link" href="/endpoints/">Overview</a></li>
    <li><a class="nav-link" href="/endpoints/mustache">Mustache</a></li>
    <li><a class="nav-link" href="/endpoints/js">JavaScript</a></li>
    <li><a class="nav-link" href="/endpoints/assets">Assets</a></li>
    <li><a class="nav-link" href="/endpoints/errors">Errors</a></li>
</ul>
<h1 class="nav-category">{{>icon-document-sm}} Scripting</h1>
<ul class="d-none">
    <li><a class="nav-link" href="/scripting/">Overview</a></li>
    <li><a class="nav-link" href="/scripting/models">Models</a></li>
    <li><a class="nav-link" href="/scripting/queries">Queries</a></li>
    <li><a class="nav-link" href="/scripting/suppliers">Suppliers</a></li>
    <li><a class="nav-link" href="/scripting/modules">Modules</a></li>
    <!--
      should be included in 'Queries'
    <li><a class="nav-link" href="/scripting/stream">Streaming</a></li>
    -->
</ul>
<div class="nav-separator">
    <a href="/examples"><h1 class="">{{>icon-media-play-circle-sm}} Examples</h1></a>
</div>
</div>

<!--
    At earliest possible moment, select the current nav link, and enable category expansion.
-->
<script>
    $each('.nav-link', function(e){
        if (e.getAttribute('href') == window.location.pathname){
            e.classList.add('active');
            e.parentElement.parentElement.classList.toggle('d-none', false);
        }
    });

    /**
     *  This technique produces the least amount of 'flashing',
     *  since there is nothing at all shown until navs are ready
     */
    $get('all-nav').classList.remove('invisible');

    $on('.nav-category', 'click', function(event){
        var cat = $up(event.target, '.nav-category');
        cat.nextElementSibling.classList.toggle('d-none');
    });
</script>