<!--TEMPLATE mustache-->

{{% partial /_layout }}

{{< layout}}

{{$title}}Scripting Engine{{/title}}

{{$content}}

<article>
    <header>
        <h1>Scripting Engine</h1>

        <p>
            Learn about our server-side JavaScript engine.
        </p>
    </header>

    <section>
        <p>
            Stacklane uses a JavaScript <b>subset</b> for server-side logic.
            This subset is designed for speed, security, and compile time validation.
            The primary uses are <a href="/endpoints/js">endpoints</a> and <a href="/endpoints/js">suppliers</a>.
        </p>
        <p>
            The JS engine implies <code>"use strict"</code> by default, however
            its strictness goes beyond this standard setting.
            In general Stacklane will not a let a script successfully compile
            unless it can validate all properties and methods referenced actually exist.
            This is particularly helpful when it comes to referencing <a href="/models/">data models</a>.
        </p>
    </section>

    <section>
        <div class="card-deck">
            <a class="card mt-1" href="/scripting/models">
                <div class="card-body">
                    <h6 class="card-title">Models</h6>
                    <p class="card-text">Defines the name and other basic properties.</p>
                </div>
            </a>
            <a class="card mt-1" href="/scripting/queries">
                <div class="card-body">
                    <h6 class="card-title">Queries</h6>
                    <p class="card-text">Create criteria based queries to find models.</p>
                </div>
            </a>
        </div>
        <div class="card-deck mt-1">
            <a class="card mt-1" href="/scripting/suppliers">
                <div class="card-body">
                    <h6 class="card-title">Suppliers</h6>
                    <p class="card-text">Reuse values across scripts and templates.</p>
                </div>
            </a>
            <a class="card mt-1" href="/scripting/modules">
                <div class="card-body">
                    <h6 class="card-title">Utilities</h6>
                    <p class="card-text">Form handling, encoding, and other utilities.</p>
                </div>
            </a>
        </div>
        <div class="card-deck mt-1">
            <a class="card mt-1" href="/scripting/users">
                <div class="card-body">
                    <h6 class="card-title">Users</h6>
                    <p class="card-text">Scripting with users, roles, and profiles.</p>
                </div>
            </a>
            <a class="card mt-1" href="/scripting/connectors">
                <div class="card-body">
                    <h6 class="card-title">Connectors</h6>
                    <p class="card-text">Connections to third party REST APIs.</p>
                </div>
            </a>
        </div>
    </section>

    <section>
        <h2>Restrictions</h2>
        <p>
            The following is not an exhaustive list, but covers common cases:
        </p>
        <p>
        <ul>
            <li>
                Use <code>let</code> instead of <code>var</code>.
            </li>
            <li>
                Compact function syntax only -- instead of <code>function (..) {..}</code>,
                use the equivalent compact syntax <code>(..)=>{..}</code>
            </li>
            <li>
                <code>Date</code> objects are immutable -- any of the <code>Date.setXyz</code> methods
                are not available.
            </li>
            <li>
                <code>const</code> is not supported.
            </li>
            <li>
                Free-form iteration via <code>for</code> or <code>while</code> is not allowed.
                Instead, where cases that require working on items in bulk, special case callback methods are provided.
            </li>
            <li>
                Once assigned, variables may not change their type -- this works
                <code>let x = null; x = '1'</code> (null to string), but this does not
                <code>let x = 1; x = '1'</code> (number to string).
            </li>
        </ul>
        </p>
    </section>

</article>

{{/content}}
{{/layout}}

