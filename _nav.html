<!--TEMPLATE mustache-->
{{% svg /icons/ as icon }}

{{% yaml /_navItems as items }}

<div id="all-nav" class="invisible">
<h1 class="nav-category">{{>icon-compass-sm}} Overview</h1>
<ul class="d-none">
    {{# items.overview }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.overview }}
</ul>
<h1 class="nav-category">{{>icon-cog-sm}} Settings</h1>
<ul class="d-none">
    {{# items.settings }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.settings }}
</ul>
<h1 class="nav-category">{{>icon-database-sm}} Models</h1>
<ul class="d-none">
    {{# items.models }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.models }}
</ul>
<h1 class="nav-category">{{>icon-target-sm}} Endpoints</h1>
<ul class="d-none">
    {{# items.endpoints }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.endpoints }}
</ul>
<h1 class="nav-category">{{>icon-document-sm}} Scripting</h1>
<ul class="d-none">
    {{# items.scripting }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.scripting }}
</ul>
<div class="nav-separator">
    <a href="/examples"><h1 class="">{{>icon-media-play-circle-sm}} Examples</h1></a>
</div>
</div>

<!--
    At earliest possible moment, select the current nav link, and enable category expansion.
-->
<script>
    $each('.nav-link', function(e){
        if (e.getAttribute('href') == window.location.pathname){
            e.classList.add('active');
            e.parentElement.parentElement.classList.toggle('d-none', false);
        }
    });

    /**
     *  This technique produces the least amount of 'flashing',
     *  since there is nothing at all shown until navs are ready
     */
    $get('all-nav').classList.remove('invisible');

    $on('.nav-category', 'click', function(event){
        var cat = $up(event.target, '.nav-category');
        cat.nextElementSibling.classList.toggle('d-none');
    });
</script>