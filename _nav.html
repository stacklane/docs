<!--TEMPLATE mustache-->
{{% svg /icons/ as icon }}

{{% yaml /_navItems as items }}

<div id="sidebar" class="is-invisible sidebar">
<h1 class="nav-category">Overview</h1>
<ul>
    {{# items.overview }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.overview }}
</ul>
<h1 class="nav-category">Settings</h1>
<ul>
    {{# items.settings }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.settings }}
</ul>
<h1 class="nav-category">Models</h1>
<ul>
    {{# items.models }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.models }}
</ul>
<h1 class="nav-category">Endpoints</h1>
<ul>
    {{# items.endpoints }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.endpoints }}
</ul>
<h1 class="nav-category">Scripting</h1>
<ul>
    {{# items.scripting }}
    <li><a class="nav-link" href="/{{path}}">{{title}}</a></li>
    {{/ items.scripting }}
</ul>
<div class="nav-separator">
    <a href="/examples"><h1 class="">Examples</h1></a>
</div>
</div>

<!--
    At earliest possible moment, select the current nav link, and enable category expansion.
-->
<script>
    $each('.nav-link', function(e){
        if (e.getAttribute('href') == window.location.pathname){
            e.classList.add('is-active');
            var ul = e.parentElement.parentElement;
            ul.classList.toggle('is-active', true);
            ul.previousElementSibling.classList.toggle('is-active', true);
        }
    });

    /**
     * This technique produces the least amount of 'flashing',
     * since there is nothing at all shown until navs are ready
     */
    $get('sidebar').classList.remove('is-invisible');

    $on('.nav-category', 'click', function(event){
        var cat = $up(event.target, '.nav-category');
        cat.classList.toggle('is-active');
        cat.nextElementSibling.classList.toggle('is-active');
    });
</script>