<!--TEMPLATE mustache-->
{{% partial /_layout }}

{{< layout}}

{{$title}}Nested Site Mounts{{/title}}

{{$content}}

<article>
    <header>
        <h1>Nested Site Mounts</h1>

        <p>
            Stacklane sites may be organized into smaller sub-sites and mounted at a path.
        </p>
    </header>

    <section>
        <p>
            To nest a site at a sub-path of another site, create a configuration file such as:
            <code>/ðŸ”Œpath-name.yaml</code> where "path-name" will become the directory
            where the site is nested at.
            For example, if your main site is hosted at <code>https://abccompany.com/</code>,
            a configured nested site <code>/ðŸ”Œstore.yaml</code> would host the
            nested site at <code>https://abccompany.com/store/</code>
        </p>
    </section>

    <section>
        <h2><code><a name="source">source</a></code></h2>

        <p>
            The only required field for a site mount is the location to obtain the nested site's source code.
        </p>

        <p>
        <pre class="language-yaml"><code>
source: https://github.com/owner/project.git#branch-or-tag
    </code></pre>
        </p>

        <div class="alert alert-warning small" role="alert">
            The <i>owner</i> must match the owner of the source including this nested mount.
        </div>
    </section>

    <section>
        <h2><code><a name="namespace">namespace</a></code></h2>

        <p>
            If the nested site is data driven, then it must be assigned a data namespace.
            This ensures the data remains relevant if you later change its path.
            Minimum length is 4 characters, maximum length is 25 characters.
        </p>

        <p>
        <pre class="language-yaml"><code>
namespace: my-namespace
    </code></pre>
        </p>

        <h3>Shared Data</h3>
        <p>
            A nested site may share data with its parent by specifying:
        </p>

        <p>
        <pre class="language-yaml"><code>
namespace: shared
    </code></pre>
        </p>

        <p>
            However this should only be used in special scenarios, especially when the parent and nested
            site are sharing the same data model.
        </p>

        <div class="alert alert-warning small" role="alert">
            Changing the namespace identifier after it contains live / production data
            will result in a loss of data.
        </div>
    </section>

    <section>
        <h2><a name="ðŸŽ¨">ðŸŽ¨</a></h2>

        <p>
            If the nested site contains a <a href="/settings/style">style configuration</a>,
            then the values in the style configuration may be overridden, where
            the values beneath "ðŸŽ¨" correspond to values in the nested site's ðŸŽ¨.scss file.
        </p>

        <p>
        <pre class="language-yaml"><code>
ðŸŽ¨:
  some-option: true
  the-color: aliceblue
    </code></pre>
        </p>
    </section>

    <section>
        <h2><a name="keys">keys</a></h2>

        <p>
            Since secure keys and credentials are scoped to the parent, there may be certain keys
            that the parent needs to expose to a nested site.
            The parent must explicitly specify individual keys,
            and any other keys will be non-existent for the nested site.
        </p>

        <p>
        <pre class="language-yaml"><code>
keys:
  - api:stripe.com
    </code></pre>
        </p>
    </section>

</article>

{{/content}}
{{/layout}}